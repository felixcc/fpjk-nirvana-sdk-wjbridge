<!doctype html>
<html>
<head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <style type='text/css'>
        html {
            font-family: Helvetica;
            color: #222;
        }

        h1 {
            color: steelblue;
            font-size: 24px;
            margin-top: 24px;
        }

        button {
            margin: 0 3px 10px;
            font-size: 12px;
        }

        .logLine {
            border-bottom: 1px solid #ccc;
            padding: 4px 2px;
            font-family: courier;
            font-size: 11px;
        }
    </style>
</head>
<body>
<h1>PHLoanBridge Demo</h1>
<div id='buttons'></div>
<div id='log'></div>
<script src="fpjk_loanBridge.js" type="text/javascript"></script>
<script>
    ;
    var uniqueId = 1;
    function log(message, data) {
        var log = document.getElementById('log')
        var el = document.createElement('div')
        el.className = 'logLine'
        el.innerHTML = uniqueId++ + '. ' + message + ':<br/>' + JSON.stringify(data)
        if (log.children.length) {
            log.insertBefore(el, log.children[0])
        }
        else {
            log.appendChild(el)
        }
    }

    window.onerror = function (err) {
        log('window.onerror: ' + err)
    };


    (function () {
        document.body.appendChild(document.createElement('br'))

        var callbackButton = document.getElementById('buttons').appendChild(document.createElement('button'))
        callbackButton.innerHTML = 'openUrl'
        callbackButton.onclick = function (e) {
            e.preventDefault()
            var data = {
                title: '\u6807\u9898',
                url: 'https://login.m.taobao.com/login.htm',
                finishUrl: 'http://h5.m.taobao.com/mlapp/mytaobao.html'
            };
            log('JS calling handler "' + callbackButton.innerHTML + '"', data)
            fpjk_loanBridge.callNativeFunc('openUrl', data, function (response) {
                log('Native function openUrl response: ', response);
                if (response['success'] != 1) {
                } else {
                    var dat = {
                        url: 'https://login.m.taobao.com/login.htm'
                    };
                    fpjk_loanBridge.callNativeFunc('getCookie', dat, function (response) {
                        log('Native function getCookie response: ', response);
                    });
                }
            });
        }


        var callbackButton1 = document.getElementById('buttons').appendChild(document.createElement('button'))
        callbackButton1.innerHTML = 'getDeviceInfo'
        callbackButton1.onclick = function (e) {
            e.preventDefault()
            var data = null;
            log('JS calling handler "' + callbackButton1.innerHTML + '"', data)
            fpjk_loanBridge.callNativeFunc('getDeviceInfo', data, function (response) {
                log('Native function getDeviceInfo response: ', response);
            });
        }

        var callbackButton2 = document.getElementById('buttons').appendChild(document.createElement('button'))
        callbackButton2.innerHTML = 'getLocation'
        callbackButton2.onclick = function (e) {
            e.preventDefault()
            var data = {
                geocoder : 0
            };
            log('JS calling handler "' + callbackButton2.innerHTML + '"', data)
            fpjk_loanBridge.callNativeFunc('getLocation', data, function (response) {
                log('Native function getLocation response: ', response);
            });
        }

        var callbackButton3 = document.getElementById('buttons').appendChild(document.createElement('button'))
        callbackButton3.innerHTML = 'getContacts'
        callbackButton3.onclick = function (e) {
            e.preventDefault()
            var data = {
                uid : "1001"
            };
            log('JS calling handler "' + callbackButton3.innerHTML + '"', data)
            fpjk_loanBridge.callNativeFunc('getContacts', data, function (response) {
                log('Native function getContacts response: ', response);
            });
        }
    })();
</script>
</body>
</html>
